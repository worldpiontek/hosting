<!doctype html>
<html lang="id" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TEMAN K3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="description" content="TEMAN K3 (Kemnaker)" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
      html { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
    </style>
  </head>
  <body class="h-full bg-white text-gray-900">
    <!-- Header (minimal, center-aligned like Google Sites) -->
    <header class="w-full bg-gray-800">
      <div class="mx-auto max-w-5xl px-8 py-4">
        <nav class="flex items-center justify-between">
          <a href="#"><img src="assets/logo.png" class="h-10"></img></a>
          <a href="https://kemnaker.go.id/" class="text-sm text-gray-400">Portal Kemnaker</a>
        </nav>
      </div>
    </header>

	<!-- Banner -->
	<div class="relative">
		<div class="relative bg-[url('assets/banner.jpg')] bg-cover bg-bottom bg-no-repeat bg-fixed">
			<section class="mx-auto max-w-5xl px-4 py-[150px] sm:py-[200px]">
				<!-- Title -->
				<div class="text-center">
					<h1 class="text-4xl text-white font-extrabold tracking-tight sm:text-5xl">TEMAN<span class="text-green-500">K3</span></h1>
					<p class="mt-3 text-xs sm:text-xl text-white">KESELAMATAN DAN KESEHATAN KERJA</p>
				</div>
			</section>
		</div>
	</div>

    <!-- Main -->
    <main class="relative">
      <section class="mx-auto max-w-5xl px-4 py-14 sm:py-20">
        <!-- Title -->
        <div class="text-center">
          <!-- CTA button -->
          <div>
            <a id="button_download" href="#" class="text-white inline-flex items-center gap-2 rounded-xl bg-gray-800 px-5 py-3 text-sm font-semibold shadow-sm">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5" aria-hidden="true"><path d="M12 3a1 1 0 0 1 1 1v9.586l2.293-2.293a1 1 0 0 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4A1 1 0 1 1 8.707 11.293L11 13.586V4a1 1 0 0 1 1-1z"/><path d="M5 15a1 1 0 0 1 1 1v2h12v-2a1 1 0 1 1 2 0v3a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z"/></svg>
              Download Hasil Scan
            </a>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800">
      <div class="mx-auto flex flex-col max-w-5xl px-8 py-10 text-center text-sm text-gray-400">
		<img
			src="assets/footer_image.png"
			alt="Banner K3"
			class="mx-auto block w-full max-w-[600px] object-contain md:object-cover mb-6"
		/>
        <p class="text-xs border-t border-white/5 pt-6 leading-6">Copyright Â© 2025<br><span class="text-green-500">Ditjen Binwasnaker &amp; K3, Kemnaker R.I</span></p>
      </div>
    </footer>

  </body>
</html>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const btn = document.getElementById("button_download");

  // Ambil parameter GET id
  const params = new URLSearchParams(window.location.search);
  const idDownload = params.get("id");

  if (!idDownload) {
    btn.href = "#";
    btn.innerText = "ID tidak ditemukan";
    btn.classList.add("bg-red-600");
    return;
  }

  try {
    // Ambil data JSON
    const response = await fetch("download_links.json?v=" + Date.now());
    const data = await response.json();

    // Cari data berdasarkan id
    const found = data.find(item => item.id === idDownload);

    if (found) {
      btn.href = found.link;
    } else {
      btn.href = "#";
      btn.innerText = "Link download tidak tersedia";
      btn.classList.add("bg-red-600");
    }
  } catch (err) {
    btn.href = "#";
    btn.innerText = "Error, gagal memuat data";
    btn.classList.add("bg-red-600");
  }
});
</script>

